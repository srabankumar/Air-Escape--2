$(document).ready(function(){function e(){y.font="50px Verdana",y.fillStyle="rgb(0,0,255)",y.save(),y.fillStyle="rgb(0,255,0)",y.save(),y.font="20px Verdana",y.fillStyle="rgb(120,200,100)",y.save(),y.restore(),y.fillText("Created by : Sraban",700,450),y.restore(),y.fillText("Score 1000 to win",300,200),y.restore(),y.fillText("AIR ESCAPE -2",300,50),y.fillText("-----------------",300,100),p.hide(),m.hide(),s=!1}function t(){x=0,p.hide(),m.hide(),s=!0,a=100,2==g&&(w=10),3==g&&(w=15),h=new Array,r=new Image,r.src="chopper.png",o=new k(100,100,150,150,0,0),f=new Array,c=new Image,c.src="ston.png";for(var e=0;e<a;e++){var t=Math.random()*v,i=Math.random()*u,l=5,d=5,y=-4;h.push(new b(t,i,l,d,y))}for(var S=0;S<w;S++){var t=v+Math.random()*v,i=Math.random()*u,l=80,d=60,y=-4;f.push(new I(t,i,l,d,y))}n()}function n(){shapesLength=h.length,stoneLength=f.length,y.clearRect(0,0,v,u);for(var e=0;e<shapesLength;e++){var t=h[e];y.fillStyle="#FFFFFF",y.fillRect(t.x,t.y,t.wi,t.he),t.x+=t.vx,t.x+t.wi<0&&(t.x=v,t.y=Math.random()*u,t.vx=-4)}for(var a=0;a<stoneLength;a++){var d=f[a];y.drawImage(c,d.x,d.y,d.w,d.h),d.x+=d.vx,d.x+d.w<0&&(d.x=v+Math.random()*v,d.y=Math.random()*u),o.x+(o.w-45)>d.x&&d.x+(d.w-30)>o.x&&o.y+(o.h-115)>d.y&&d.y+(d.h-10)>o.y&&(p.show(),s=!1,m.show())}x++,y.font="30px Bold Verdana",y.fillStyle="#FF0000",y.fillText("Score :"+x,20,470),o.y+=o.vy,i(),y.drawImage(r,o.x,o.y),l?o.vy=-2:o.vy=2,o.y<-20&&(p.show(),o.vy=0,s=!1,m.show()),o.y+30>u&&(p.show(),s=!1,m.show()),s&&setTimeout(n,33)}function i(){x==T&&(p.show(),s=!1,y.font="50px Verdana",y.fillStyle="rgb(0,255,0)",y.fillText("YOU WON",400,300))}var a,h,r,o,l,s,f,c,x,d=$("#mycanvas"),y=d.get(0).getContext("2d"),v=d.width(),u=d.height(),w=5,g=1,p=$("#reset"),m=$("#endgame"),S=$("#start"),F=$("#easy"),D=$("#medium"),M=$("#hard"),T=1e3,b=function(e,t,n,i,a){this.x=e,this.y=t,this.wi=n,this.he=i,this.vx=a},k=function(e,t,n,i,a,h){this.x=e,this.y=t,this.w=n,this.h=i,this.vx=a,this.vy=h},I=function(e,t,n,i,a){this.x=e,this.y=t,this.w=n,this.h=i,this.vx=a};p.click(function(e){x=0,e.preventDefault(),t(),p.hide()}),S.click(function(e){e.preventDefault(),F.hide(),D.hide(),M.hide(),S.hide(),t()}),F.click(function(e){e.preventDefault(),g=1}),D.click(function(e){e.preventDefault(),g=2}),M.click(function(e){e.preventDefault(),g=3}),$(d).mousedown(function(e){e.preventDefault(),l=!0}),$(d).mouseup(function(e){e.preventDefault(),l=!1}),e()});